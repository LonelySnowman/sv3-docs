# ã€ä»é›¶åˆ°ä¸€æ‰‹æ’•è„šæ‰‹æ¶ | ç¬¬å››èŠ‚ã€‘åŠ é€Ÿå¼€å‘æ•ˆç‡ ä½¿ç”¨plopç”Ÿæˆå¼€å‘æ¨¡æ¿ ä½¿ç”¨mockè¿›è¡Œæ•°æ®æ¨¡æ‹Ÿ

> Helloå¤§å®¶å¥½æˆ‘æ˜¯â›„ï¼Œä¹‹å‰æˆ‘ä»¬å·²ç»é…ç½®äº†è„šæ‰‹æ¶éœ€è¦å…·å¤‡çš„åŸºæœ¬åŠŸèƒ½ï¼šä»£ç å°è£…ï¼Œå›¢é˜Ÿåä½œè§„èŒƒç­‰ã€‚ä½†æ˜¯å¯èƒ½æˆ‘ä»¬æœ‰å…¶ä»–çš„éœ€æ±‚ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬æƒ³å¿«é€Ÿç”Ÿæˆå‡ ä¸ªåŸºç¡€çš„ç»„ä»¶æ¨¡æ¿æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Plopæˆ–è€…ä½¿ç”¨æ–‡ä»¶å†™å…¥å®ç°ã€‚æ¯”å¦‚æˆ‘ä»¬ä¸æƒ³ç­‰åç«¯åŒå­¦çš„æ¥å£ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨mockæ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆã€‚
>
> - **GitHub**ï¼š[LonelySnowman/sv3-template](https://github.com/LonelySnowman/sv3-template)
> - **å®˜æ–¹æ–‡æ¡£**ï¼š[SV3-Family | Vue3](https://sv3-docs.snowhouse.space/)

- å‰ç½®çŸ¥è¯†ï¼šVueå…¨å®¶æ¡¶ï¼Œäº†è§£Viteæˆ–WebPackç­‰æ„å»ºå·¥å…·ï¼ŒNode.js
- æ‚¨å°†æ”¶è·åˆ°ï¼šä»é›¶åˆ°ä¸€æ„å»ºä¸€ä¸ªè§„èŒƒçš„ Vue3+TS+Vite è„šæ‰‹æ¶

## é…ç½® plop

- æƒ³ä¸€æƒ³å¹³æ—¶æˆ‘ä»¬æ˜¯å¦‚ä½•æ–°å»ºä¸€ä¸ªç»„ä»¶çš„ï¼Œå³é”®->æ–°å»ºæ–‡ä»¶->å‘½åæ–‡ä»¶->ç¼–å†™ç»„ä»¶ä»£ç ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨å‘½ä»¤è¡Œç”Ÿæˆæ–‡ä»¶ï¼Œå¹¶ä¸”è¿™äº›ç»„ä»¶éƒ½ä¼šç¼–å†™ä¸€äº›é‡å¤çš„å†…å®¹ï¼Œè¿™äº›å†…å®¹åœ¨æ–°å»ºæ—¶å°±å…·å¤‡ï¼Œæˆ‘ä»¬å¹³å¸¸å¯èƒ½å°±ç›´æ¥`ctrl+c`ã€`ctrl+v`ï¼Œè¿˜æ˜¯æœ‰ä¸€ç‚¹ç¹ççš„ğŸ˜“ã€‚æœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•èƒ½å¿«é€Ÿç”Ÿæˆå„ç§ç»„ä»¶çš„æ¨¡æ¿å‘¢ï¼Ÿæ¥ä¸‹æ¥å°±è¦ç”¨åˆ°æˆ‘ä»¬çš„`plop`å•¦ğŸ˜€ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿç”Ÿæˆå¼€å‘æ¨¡æ¿ï¼Œæé«˜æ•ˆç‡ã€‚
- **plopæ˜¯ä¸€ç§â€œå¾®å‹ç”Ÿæˆå™¨æ¡†æ¶â€**ã€‚ è¿™æ˜¯å› ä¸ºå®ƒæä¾›äº†ä¸€ç§å¿«é€Ÿç”Ÿæˆä»£ç æˆ–å…¶ä»–æ–‡æœ¬æ–‡ä»¶çš„ä¾¿æ·æ–¹å¼ï¼ŒåŒæ—¶åˆä¿æŒäº†å¾ˆå°çš„ä½“ç§¯ã€‚æˆ‘ä»¬æ€»æ˜¯åœ¨ä»£ç ä¸­åˆ›å»ºä¸åŒçš„ç»“æ„å’Œæ¨¡å¼ï¼Œå¦‚è·¯ç”±ã€æ§åˆ¶å™¨ã€ç»„ä»¶ã€å·¥å…·ç±»ç­‰ã€‚è¿™äº›æ¨¡å¼ä¼šéšç€æ—¶é—´çš„å˜åŒ–ä¸æ–­åœ°è¢«æ”¹å˜å’Œä¼˜åŒ–ï¼Œæ‰€ä»¥å½“ä½ æƒ³è¦å»åˆ›å»ºä¸€ä¸ªæ–°çš„å·²ç»å­˜åœ¨çš„æ¨¡ç‰ˆæ—¶ï¼Œä½ å¾ˆéš¾åœ¨ä½ çš„é¡¹ç›®/ä»£ç ä¸­æ‰¾åˆ°å¯¹äºå½“å‰éœ€è¦åˆ›å»ºçš„æ¨¡æ¿çš„æœ€ä½³å®è·µï¼Œè¿™æ—¶å€™å°±è½®åˆ° plop å¤§å±•èº«æ‰‹äº†ã€‚ä½¿ç”¨ plop, ä½ èƒ½å¤Ÿéšæ—¶åœ¨é¡¹ç›®ä¸­æ›´æ–°æŸç§ç‰¹å®šä»£ç æ¨¡å¼çš„æœ€ä½³å®è·µï¼Œä½ åªéœ€è¦åœ¨å‘½ä»¤è¡Œä¸­é”®å…¥ plop å°±èƒ½å¿«é€Ÿåœ°è¿è¡Œä»£ç ã€‚è¿™ä¸ä»…èƒ½é¿å…ä»æ•´ä¸ªä»£ç åº“ä¸­å¯»æ‰¾æœ€ä½³æ¨¡æ¿ç„¶åå¤åˆ¶çš„è¿‡ç¨‹ï¼Œè€Œä¸”åˆèƒ½æ­£ç¡®é«˜æ•ˆåœ°åˆ›å»ºæ–‡ä»¶ã€‚
- å®˜æ–¹æ–‡æ¡£ï¼š[Learning to Plop : PLOP (plopjs.com)](https://plopjs.com/documentation/)

### å®‰è£…ä¾èµ–

```bash
pnpm install -D plop
```

### ç¼–å†™å‘½ä»¤è¡Œäº¤äº’

- æ¥ä¸‹æ¥ä»¥æ–°å»ºä¸€ä¸ª`vue`ç»„ä»¶çš„æ¨¡æ¿ä¸ºä¾‹
- åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç”¨äºå­˜æ”¾å¼€å‘æ¨¡æ¿çš„æ–‡ä»¶`plop-templates`
- å†æ–°å»ºä¸€ä¸ª`component`æ–‡ä»¶å¤¹ä»£è¡¨è¿™é‡Œé¢å­˜æ”¾å¼€å‘ç»„ä»¶çš„æ¨¡æ¿
- åœ¨`component`ä¸­æ–°å»º`index.hbs`ç¼–å†™æ–‡ä»¶æ¨¡æ¿ï¼Œ`prompt.js`ç¼–å†™äº¤äº’é€»è¾‘

```
|plop-templates
	|components
		|index.hbs
		|prompt.js
```

æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥åœ¨`prompt.js`ä¸­ç¼–è¾‘äº¤äº’é€»è¾‘å•¦

æˆ‘ä»¬éœ€è¦åœ¨è¯¥æ¨¡å—å¯¼å‡ºä¸€ä¸ªé…ç½®é¡¹ï¼Œä¸»è¦éœ€è¦é…ç½®ä¸‰ä¸ªå†…å®¹

- descriptionï¼šè¯¥æ¨¡æ¿çš„åç§°
- promptsï¼šè¯¥æ¨¡æ¿éœ€è¦çš„å‚æ•°
- actionsï¼šæ‰§è¡Œåéœ€è¦è¿›è¡Œçš„æ“ä½œ

å…·ä½“è¯¦æƒ…å¯ä»¥çœ‹ä¸‹é¢çš„ä»£ç ï¼Œå‡å·²åŠ å…¥è¯¦ç»†æ³¨é‡Š

```js
const fs = require('fs');
const path = require('path');
// å¼•å…¥ä¾¿äºæˆ‘ä»¬éªŒè¯é—®ä»·å¤¹ä¸­æ˜¯å¦å­˜åœ¨é‡åæ–‡ä»¶çš„å·¥å…·å‡½æ•°ï¼Œåé¢æœ‰è¯¦ç»†ä»£ç 
const verifyFileExist = require('../utils');
// å¼•å…¥æˆ‘ä»¬éœ€è¦åˆ›å»ºè¯¥æ¨¡æ¿åˆ°è¾¾çš„åŸºç¡€è·¯å¾„ä½ç½®
const baseFile = path.join(__dirname, '../../src/views');

module.exports = {
   // ç¼–å†™å¯¹æ¨¡æ¿ä»¶çš„æè¿°
   description: 'åˆ›å»ºç»„ä»¶',
   // ç¼–å†™å‘½ä»¤è¡Œäº¤äº’é€»è¾‘ï¼Œå¯åœ¨å‘½åè¡Œä¸­è·å–å‚æ•°
   prompts: [
      {
         name: 'componentName', // è¯¥å‚æ•°çš„åç§° ä¹‹åå¯ä»¥ä½¿ç”¨ componentName è°ƒç”¨
         type: 'input', // è¯¥å‚æ•°çš„ç±»å‹ input ä»£è¡¨è¾“å…¥
         message: 'è¯·è¾“å…¥é¡µé¢åç§°', // è¯¥äº¤äº’çš„æç¤ºä¿¡æ¯
         validate: (dirName) => { // ä¼ å…¥ä¸€å‡½æ•°å¯¹ç”¨æˆ·ä¼ å…¥çš„å‚æ•°è¿›è¡Œæ ¡éªŒ
            if (!dirName || dirName.trim === '') { // éªŒè¯ç”¨æˆ·æ˜¯å¦è¾“å…¥
               return 'ç»„ä»¶åç§°ä¸èƒ½ä¸ºç©º'; // è¿”å›å­—ç¬¦ä¸²æŠ¥é”™
            } else if (verifyFileExist(dirName, baseFile)) { // éªŒè¯æ–‡ä»¶æ˜¯å¦å­˜åœ¨
               return 'ç»„ä»¶å·²ç»å­˜åœ¨'; // è¿”å›å­—ç¬¦ä¸²æŠ¥é”™
            } else {
               return true; // è¿”å› ture åˆ™ç»§ç»­æ‰§è¡Œ action
            }
         },
      },
   ],
   // ç¼–å†™æ¥æ”¶å®Œå‚æ•°åéœ€è¦æ‰§è¡Œçš„æ“ä½œ
   actions: (data) => {
      const basePath = path.join(baseFile, `./${data.pageName}`);
      // æ–°å»ºä¸€ä¸ªç»„ä»¶æ–‡ä»¶å¤¹
      fs.mkdirSync(basePath);
      // æ–°å»ºä¸€ä¸ªç»„ä»¶æ–‡ä»¶å¤¹ä¸‹çš„é€šç”¨ç»„ä»¶æ–‡ä»¶å¤¹
      fs.mkdirSync(path.join(baseFile, `./${data.pageName}/components`));
       
      // æœ€åæˆ‘ä»¬éœ€è¦è¿”å›ä¸€ä¸ª actions
      // type ç”¨äºé…ç½®æ‰§è¡Œçš„æ“ä½œç±»å‹ add ä»£è¡¨æ–°å¢æ–‡ä»¶
      // path ä»£è¡¨æ–°å»ºæ–‡ä»¶çš„è·¯å¾„
      // templateFile ä»£è¡¨æˆ‘ä»¬ä½¿ç”¨çš„æ¨¡æ¿ ä¸‹æ–‡ä¼šæœ‰
      const actions = [
         {
            type: 'add',
            path: path.join(basePath, 'index.vue'),
            templateFile: path.join(__dirname, './index.hbs'),
         },
      ];
      return actions;
   },
};
```

å› ä¸ºæ£€æµ‹ä¸€ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨éœ€è¦ç»å¸¸ä½¿ç”¨ï¼Œæˆ‘ä»¬å°†å…¶å°è£…æˆä¸€ä¸ªå‡½æ•°æŠ½ç¦»å‡ºæ¥ï¼Œåœ¨`plop-templates/utils.js`ä¸­ç¼–å†™ï¼š

- å°±æ˜¯ä¸€ä¸ªç®€å•çš„éªŒè¯å‡½æ•°ï¼Œå¤§å®¶æ ¹æ®è‡ªå·±çš„ä¹ æƒ¯ç¼–å†™å³å¯

```js
const fs = require('fs');

// éªŒè¯æ–‡ä»¶åœ¨æ–‡ä»¶å¤¹ä¸­æ˜¯å¦å­˜åœ¨
function verifyFileExist(dirName, dirPath, tail = '') {
   const directories = fs.readdirSync(dirPath);
   return directories.includes(dirName + tail);
}

module.exports = verifyFileExist;
```

### ç¼–å†™å¼€å‘æ¨¡æ¿

æˆ‘ä»¬åœ¨`plop-templates/components/index.hbs`ä¸­ç¼–å†™ç»„ä»¶çš„æ¨¡æ¿ï¼š

æ¯ä¸€ä¸ªå­—ç¬¦éƒ½ä¼šè¢«å†™å…¥`actions`ä¸­è¿”å›çš„`path`ç›®æ ‡æ–‡ä»¶ä¸­ï¼Œåªæœ‰è¢«**åŒå¤§æ‹¬å·åŒ…è£¹**çš„å†…å®¹ä¼šè¢«è§£ææˆ`prompts`ä¼ å…¥çš„å‚æ•°ã€‚

ä¸‹é¢çš„ `properCase pageName` å°±æ˜¯è¡¨ç¤ºå†™å…¥ pageName å‚æ•° å¹¶ä¸”å°å†™ã€‚

```vue
<template>
   <div>
     {{ properCase pageName }}
   </div>
</template>

<script lang="ts" setup>
// typeScript
</script>

<style lang="scss" scoped>
/* scss */
</style>
```

### è°ƒç”¨æŒ‡ä»¤

è¦ä½¿ç”¨æˆ‘ä»¬çš„å¼€å‘æ¨¡æ¿ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª`plopfile.js`è¿›è¡Œé…ç½®ï¼Œè¯¦ç»†å†…å®¹å¦‚ä¸‹ï¼š

```js
module.exports = function (plop) {
   // è®¾ç½®æ¬¢è¿è¯­
   plop.setWelcomeMessage('è¯·é€‰æ‹©éœ€è¦åˆ›å»ºçš„æ¨¡æ¿');
   // è®¾ç½®é€‰æ‹©çš„ç”Ÿæˆå™¨æ¨¡æ¿
   // ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå¯¹åº”åç§°
   // ç¬¬äºŒä¸ªå‚æ•°ä¸º prompts çš„åœ°å€
   plop.setGenerator('components', require('./plop-templates/page/prompt'));
};
```

ç„¶åæˆ‘ä»¬åœ¨`package.json`ä¸­é…ç½®ä¸€æ¡æŒ‡ä»¤ä¾¿äºæˆ‘ä»¬è°ƒç”¨

```json
{
  "scripts": {
      "gen": "plop"
   },
}
```

è¿è¡Œè¯¥æŒ‡ä»¤å°±å¯ä»¥å¿«é€Ÿç”Ÿæˆæˆ‘ä»¬é…ç½®å¥½çš„æ¨¡æ¿å•¦ğŸ˜„ã€‚

ä»¥ä¸Šå†…å®¹ä¸ºä¸€ä¸ªç®€å•çš„å°ç¤ºä¾‹ï¼Œplop è¿˜æœ‰éå¸¸å¤šå¼ºå¤§çš„åŠŸèƒ½ï¼Œå¤§å®¶å¯ä»¥å‰å¾€å®˜æ–¹æ–‡æ¡£æ¢ç´¢ï¼š[Learning to Plop : PLOP (plopjs.com)](https://plopjs.com/documentation/)

é¡¹ç›®é‡Œå·²ä¸ºå¤§å®¶é…ç½®å¥½äº†å„ç§

## é…ç½® mock

- æƒ³æƒ³æˆ‘ä»¬å¹³æ—¶å¯¹æ¥æ¥å£æ˜¯æ€ä¹ˆåšçš„ï¼Œé¦–å…ˆå‰åç«¯ç¡®å®šå¥½æ¥å£ï¼Œè®©åç¡®å®šå¥½æ¥å£æ–‡æ¡£ã€‚å¦‚æœå·²ç»ç¼–å†™å¥½å‰ç«¯ä»£ç ï¼Œå°±å·®ä¸åç«¯å¯¹æ¥äº†ï¼Œåªèƒ½è‡ªå·±å‚»å‚»ç­‰å¾…ä¹ˆğŸ˜´ã€‚å½“ç„¶ä¸æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ mock å·¥å…·è¿›è¡Œæ•°æ®çš„æ¨¡æ‹Ÿï¼Œæå‰ç¼–å†™å¥½æ•°æ®å±•ç¤ºçš„å†…å®¹ï¼Œæœ€åå¯¹æ¥çš„æ—¶å€™å…³é—­ mock å³å¯ã€‚
- mock å®ç°çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ vite å°±æœ‰ä¸€ä¸ªæ’ä»¶æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼š`vite-plugin-mock`

### å®‰è£…ä¾èµ–

```bash
pnpm install -D mockjs vite-plugin-mock
```

### è¿”å›å†…å®¹é…ç½®

mock çš„ç¼–å†™æ–¹å¼éå¸¸éå¸¸ç®€å•ï¼Œåªéœ€è¦ä¸€ä¸ªæ•°ç»„å³å¯ã€‚

æˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª`mock`æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨å…¶ä¸­æ–°å»ºä¸€ä¸ª`user.ts`ç”¨äºç”¨æˆ·ç™»å½•çš„æ•°æ®æ¨¡æ‹Ÿã€‚

é…ç½®æ–¹å¼ä¹Ÿæ˜¯éå¸¸çš„ç®€å•

- urlï¼šé…ç½®æ¥å£URLåœ°å€
- methodï¼šé…ç½®æ¥å£çš„è¯·æ±‚æ–¹å¼
- responseï¼šç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œç¼–å†™å¤„ç†é€»è¾‘ï¼Œå¹¶è¿”å›å“åº”çš„å†…å®¹ã€‚

```ts
import { MockMethod } from 'vite-plugin-mock';
export default [
   {
      // å‰é¢çš„ /mock ä¸º mock ç”Ÿæ•ˆéœ€è¦é…ç½®çš„æ ¹è·¯å¾„ åé¢ä¼šæåˆ°
      url: '/mock/api/login',
      method: 'post',
      // ä½¿ç”¨ body å¯ä»¥è·å–è¯·æ±‚ä½“
      response: ({ body }) => {
         // ç®€å•ç¼–å†™ä¸€ä¸ªé€»è¾‘
         // ç”¨æˆ·åä¸ç­‰äºå¯†ç å°±æ˜¯å¯†ç é”™è¯¯
         if (body.username !== body.password) {
            // è¿”å›JSONä¿¡æ¯
            return {
               code: 1,
               message: 'å¯†ç é”™è¯¯',
               data: {
                  username: '',
                  roles: [],
                  accessToken: '',
               },
            };
         }
         // å…¶ä½™çš„åˆ™æ˜¾ç¤ºç™»å½•æˆåŠŸ
         if (body.username === 'admin') {
            return {
               code: 0,
               message: 'ç™»å½•æˆåŠŸ',
               data: {
                  username: 'admin',
                  roles: ['admin'],
                  accessToken: 'admin',
               },
            };
         } else {
            return {
               code: 0,
               message: 'ç™»å½•æˆåŠŸ',
               data: {
                  username: 'common',
                  roles: ['common'],
                  accessToken: 'common',
               },
            };
         }
      },
   },
] as MockMethod[];

```

### å¯ç”¨ mock

å¯åŠ¨ mock éœ€è¦æˆ‘ä»¬é…ç½®ä¸€ä¸‹ vite

```js
// åœ¨ plugins æ•°ç»„ä¸­åŠ å…¥å¦‚ä¸‹é…ç½®
[
      viteMockServe({
         // å¦‚æœæ¥å£ä¸º /mock/xxx ä»¥ mock å¼€å¤´å°±ä¼šè¢«æ‹¦æˆªå“åº”é…ç½®çš„å†…å®¹
         mockPath: 'mock', // æ•°æ®æ¨¡æ‹Ÿéœ€è¦æ‹¦æˆªçš„è¯·æ±‚èµ·å§‹ URL
         localEnabled: true, // æœ¬åœ°å¼€å‘æ˜¯å¦å¯ç”¨
         prodEnabled: false, // ç”Ÿäº§æ¨¡å¼æ˜¯å¦å¯ç”¨
      }),
]
```

ç„¶åæˆ‘ä»¬æ‰€æœ‰ä»¥ mock å¼€å¤´çš„æ¥å£éƒ½ä¼šæˆä¸ºæˆ‘ä»¬ä½¿ç”¨ mock æ¨¡æ‹Ÿçš„è¿”å›æ•°æ®

### å…³é—­ mock

- å¦‚æœåç«¯åŒå­¦æ¥å£æµ‹è¯•å®Œæ¯•ï¼Œéœ€è¦æˆ‘ä»¬æ­£å¼å¯¹æ¥äº†ï¼Œæˆ‘ä»¬ä¸æƒ³å¯ç”¨ mock äº†è¯¥æ€ä¹ˆåŠï¼Œå¯ä»¥åœ¨ vite é…ç½®ä¸­å…³é—­ï¼Œä½†æˆ‘å–œæ¬¢ä½¿ç”¨**ç¯å¢ƒå˜é‡**é…ç½®mockçš„å¼€å…³

ç¼–å†™`.env`

```
// åç«¯æ¥å£çš„æ ¹è·¯å¾„
VITE_APP_API_BASEURL = /api
// éœ€è¦æ¨¡æ‹Ÿçš„è¯·æ±‚æ ¹è·¯å¾„
VITE_APP_MOCK_BASEURL = /mock/api
```

ç¼–å†™`.env.development`

```
// é€‰æ‹© development æ¨¡å¼ä¸‹æ˜¯å¦å¼€å¯ mock
VITE_APP_USE_MOCK = true
```

ç¼–å†™`.env.production`

```
// é€‰æ‹© production æ¨¡å¼ä¸‹æ˜¯å¦å¼€å¯ mock
VITE_APP_USE_MOCK = true
```

**é…ç½® axios å…¨å±€è¯·æ±‚è·¯å¾„**

ä¹‹å‰æˆ‘ä»¬å·²ç»å°† axios å°è£…åœ¨ `src/utils/http/index.ts` ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ­¤æ ¹æ®ç¯å¢ƒå˜é‡é…ç½® axios çš„è¯·æ±‚è·¯å¾„

```js
const service: AxiosInstance = axios.create({
   // å¯ç”¨ mock å°±è¯·æ±‚ mock è·¯å¾„
   // ä¸å¯ç”¨ mock å°±è¯·æ±‚ æ­£å¸¸åç«¯è·¯å¾„
   baseURL: Boolean(import.meta.env.VITE_APP_USE_MOCK)
      ? import.meta.env.VITE_APP_MOCK_BASEURL
      : import.meta.env.VITE_APP_API_BASEURL,
   timeout: 15000,
});
```

**æ³¨æ„**ï¼šè¿™é‡Œæˆ‘ä»¬å¹¶ä¸éœ€é…ç½®åç«¯åœ°å€ï¼Œç»Ÿä¸€è¯·æ±‚ LocalHostã€‚æˆ‘ä»¬åªéœ€è¦å¼€å¯æœ¬åœ°ä»£ç†åœ¨ vite proxy ä¸­é…ç½®åç«¯åœ°å€å³å¯ï¼Œè¿™æ ·æ–¹ä¾¿ä¸€äº›ã€‚

**è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è½»æ¾çš„é€‰æ‹©å¼€å…³ mock å•¦**ğŸ˜€

## ç»“è¯­

æ¯ä¸ªäººçš„ä½¿ç”¨ä¹ æƒ¯ä¸åŒï¼Œè¿™é‡Œæä¾›äº†æˆ‘å¸¸ç”¨çš„æ–¹æ³•ä¾›å¤§å®¶å‚è€ƒï¼Œå¦‚æœ‰å…¶ä»–ä½¿ç”¨æ–¹æ³•æ¬¢è¿å¤§å®¶è®¨è®ºğŸ˜„ã€‚

ç»ˆäºæŠŠç¬¬å››èŠ‚æ›´æ–°å®Œå•¦ï¼Œä¸€ä¸ªæœ€åŸºç¡€çš„ Vue3+Vite+TS å‰ç«¯å¼€å‘è„šæ‰‹æ¶å°±æ­å»ºå®Œæˆäº†ï¼Œæ—¥åæŠ€æœ¯æ ˆæ›´æ–°ä¼šå¸®åŠ©å¤§å®¶æä¾›æ›´æ”¹å¥½çš„æ–¹æ¡ˆï¼Œå¤§å®¶å¯¹è¯¥é¡¹ç›®çš„æ„è§ä¹Ÿè¯·åŠæ—¶æŒ‡å‡ºï¼Œæˆ‘ä¼šæ±²å–å¤§å®¶çš„æ„è§ä¸æ–­å­¦ä¹ å¹¶æ›´æ–°ã€‚

**ç³»åˆ—æ–‡ç« **ï¼š

- [ã€ä»é›¶åˆ°ä¸€æ‰‹æ’•è„šæ‰‹æ¶ | ç¬¬ä¸€èŠ‚ã€‘é…ç½®åŸºç¡€é¡¹ç›®ç»“æ„ Vite + TypeScrpit + Vue3 åˆå§‹åŒ–é¡¹ç›®](https://juejin.cn/post/7207615983950987320)
- [ã€ä»é›¶åˆ°ä¸€æ‰‹æ’•è„šæ‰‹æ¶ | ç¬¬äºŒèŠ‚ã€‘æ¨¡å—åŒ–å°è£… é™ä½è€¦åˆåº¦ å°è£… axios pinia router](https://juejin.cn/post/7209542304863649852)
- [ã€ä»é›¶åˆ°ä¸€æ‰‹æ’•è„šæ‰‹æ¶ | ç¬¬ä¸‰èŠ‚ã€‘é¡¹ç›®é›†æˆCommitLInt+ESLint+Prettier+StyleLint+LintStaged](https://juejin.cn/post/7213310111623725117)
- **æé«˜å¼€å‘æ•ˆç‡**ï¼šMock.jsè¿›è¡Œæ•°æ®æ¨¡æ‹Ÿï¼Œå‘Šåˆ«åç«¯æ‘†çƒ‚ã€‚Plopå¿«é€Ÿç”Ÿæˆæ¨¡æ¿æ–‡ä»¶ï¼

**å‚è€ƒå­¦ä¹ é¡¹ç›®**ï¼š

- [fast-vue3](https://github.com/tobe-fe-dalao/fast-vue3)
- [vue-pure-admin](https://github.com/pure-admin/vue-pure-admin)

> å¦‚æœæœ‰ä»»ä½•ä¸æ­£ç¡®çš„åœ°æ–¹è¯·æŒ‡æ­£ï¼Œæˆ‘ä¼šåŠæ—¶æ›´æ”¹ã€‚
>
> æ›´æ–‡ä¸æ˜“ï¼Œå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œè¯·ç»™æˆ‘ç‚¹ä¸ªèµå§ğŸ‘
>
> å…³æ³¨æˆ‘ï¼Œåç»­æ–‡ç« ä¸è¿·è·¯â›„
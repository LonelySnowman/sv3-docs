# ã€ä»é›¶åˆ°ä¸€æ‰‹æ’•è„šæ‰‹æ¶ã€‘ç¬¬ä¸€èŠ‚ï¼Œé…ç½®åŸºç¡€é¡¹ç›®ç»“æ„ï¼Œ Vite + TypeScrpit + Vue3 åˆå§‹åŒ–é¡¹ç›®

> helloå¤§å®¶å¥½æˆ‘æ˜¯é›ªäººâ›„ï¼Œä¸çŸ¥ä¸è§‰æ–­æ›´å¥½ä¹…äº†ğŸ˜„ï¼Œç»è¿‡äº†é•¿æ—¶é—´çš„å­¦ä¹ ï¼Œç»ˆäºè¸å…¥äº†å‰ç«¯å·¥ç¨‹åŒ–çš„å¤§é—¨ï¼Œå¤§å®¶å†æ—¥å¸¸å¼€å‘ä¸­æ€»æ˜¯ä¼šç”¨åˆ°ä¸€ä¸ªå¼€å‘å·¥å…·ï¼šè„šæ‰‹æ¶ï¼Œå¤§å®¶åœ¨ä½¿ç”¨å…¶ä»–äººçš„è„šæ‰‹æ¶æˆ–è€…ä¸€äº›å®˜æ–¹è„šæ‰‹æ¶çš„æ—¶å€™ï¼Œå¯èƒ½åªæ‡‚å¾—ä½¿ç”¨å¹¶ä¸æ‡‚å¾—å¦‚ä½•å®ç°ï¼Œçœ‹åˆ°ä¸€äº›ä»£ç åªæ˜¯çŸ¥å…¶ç„¶ä¸çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œä»Šå¤©ä¸ºå¤§å®¶å¸¦æ¥ä¸€å¥—æ•™ç¨‹ï¼Œæ•™å¤§å®¶å…¥é—¨â€œè„šæ‰‹æ¶â€ï¼Œç›¸ä¿¡ä½ ä¸€å®šä¼šæœ‰æ‰€æ”¶è·ã€‚
>
> ç›®å‰é¡¹ç›®å·²å¼€æºä¸”ä»å¤„äºå¼€å‘é˜¶æ®µï¼Œåç»­ä¼šæ›´æ–°æ›´å¤šå†…å®¹ï¼Œå¦‚æœ‰ä¸æ­£ç¡®çš„åœ°æ–¹è¯·å¤§å®¶æŒ‡æ­£ï¼Œæˆ‘ä¼šåŠæ—¶æ›´æ–°å¹¶çº æ­£æˆ‘çš„é”™è¯¯ã€‚
>
> - **GitHub**ï¼š[LonelySnowman/sv3-template](https://github.com/LonelySnowman/sv3-template)
> - **å®˜æ–¹æ–‡æ¡£**ï¼š[SV3-Family | Vue3](https://sv3-docs.snowhouse.space/)

- å‰ç½®çŸ¥è¯†ï¼šVueå…¨å®¶æ¡¶ï¼Œäº†è§£Viteæˆ–WebPackç­‰æ„å»ºå·¥å…·ï¼ŒNode.js
- æ‚¨å°†æ”¶è·åˆ°ï¼šä»é›¶åˆ°ä¸€æ„å»ºä¸€ä¸ªè§„èŒƒçš„ Vue3+TS+Vite è„šæ‰‹æ¶

**é¡¹ç›®ä½¿ç”¨çš„ä¾èµ–**ï¼š

- ä½¿ç”¨ Vite è¿›è¡Œé¡¹ç›®æ„å»º
- ä½¿ç”¨ TypeScript
- ä½¿ç”¨ Sass ç¼–å†™æ ·å¼
- å¯¹ piniaï¼Œvue-routerï¼Œaxios è¿›è¡Œæ¨¡å—åŒ–å°è£…
- ä½¿ç”¨ CommitLintï¼ŒESLintï¼ŒStyleLintï¼ŒPrettierï¼ŒLintStage è¿›è¡Œå›¢é˜Ÿé¡¹ç›®è§„èŒƒ
- ä½¿ç”¨ Mock.js æ¨¡æ‹Ÿæ•°æ®ï¼Œä½¿ç”¨ plop å¿«é€Ÿç”Ÿæˆå¼€å‘æ¨¡æ¿
- ä½¿ç”¨ ElementPlus ç»„ä»¶åº“

**å‚è€ƒå­¦ä¹ é¡¹ç›®**ï¼š

- [fast-vue3](https://github.com/tobe-fe-dalao/fast-vue3)
- [vue-pure-admin](https://github.com/pure-admin/vue-pure-admin)

## ç¡®å®šé¡¹ç›®ç›®å½•ç»“æ„

- é¦–å…ˆåˆ—å‡ºç›®å½•ç»“æ„ï¼Œå¤§å®¶æ ¹æ®ç›®å½•ç»“æ„ç›´æ¥åˆ›å»ºç›®å½•å³å¯ï¼Œåç»­ä¼šç»™å¤§å®¶è¯¦è§£è¿™äº›ç›®å½•ã€‚

> ä¸‹é¢æ˜¯æˆ‘å­¦ä¹ åˆ°çš„ä¸€äº›é¡¹ç›®ç›®å½•ç»“æ„ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒï¼Œå­¦ä¹ å®Œæ¯•åå¯ä»¥æ ¹æ®è‡ªå·±çš„ä¹ æƒ¯è¿›è¡Œæ›´æ”¹ã€‚

```text
sv3-template/
	|- .husky/	# gité’©å­é…ç½®
	|- build/	# é¡¹ç›®æ‰“åŒ…é…ç½® 
	|- mock/	# æ•°æ®è¯·æ±‚æ¨¡æ‹Ÿ
	|- plop-templates/	# é¡¹ç›®å¼€å‘æ¨¡æ¿
	|- public/	# ä¸ç»è¿‡æ‰“åŒ…çš„é™æ€èµ„æº
	|- type/	# tsç±»å‹å®šä¹‰
	|- src/		# é¡¹ç›®èµ„æº
		|- api/		# httpè¯·æ±‚ç®¡ç†
		|- assets/	# ç»è¿‡æ‰“åŒ…çš„é™æ€èµ„æº
		|- components/	# é€šç”¨ç»„ä»¶
		|- hooks/	# é€šç”¨ç»„ä»¶çŠ¶æ€é€»è¾‘å‡½æ•°
		|- router/	# é¡¹ç›®è·¯ç”±ç®¡ç†
		|- store/	# ç»„ä»¶çŠ¶æ€ç®¡ç†
		|- styles/	# é¡¹ç›®é€šç”¨æ ·å¼
		|- utils/	# å·¥å…·å‡½æ•°
			|- http/axios/ # axioså°è£…
		|- views/	# é¡µé¢ç»„ä»¶
```

- æ¥ä¸‹æ¥è®²è§£ä¸€ä¸ªåŸºæœ¬çš„Vue3è„šæ‰‹æ¶éœ€è¦å…·å¤‡å“ªåŠŸèƒ½

## Vue3å…¨å®¶æ¡¶

- æˆ‘ä»¬æ—¢ç„¶è¦å¼€å‘Vueé¡¹ç›®ï¼ŒVueå…¨å®¶æ¡¶å½“ç„¶æ˜¯æœ€é‡è¦çš„ï¼Œä½¿ç”¨piniaè¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œä½¿ç”¨vue-routerè¿›è¡Œè·¯ç”±ç®¡ç†ï¼Œaxiosè¿›è¡Œhttpè¯·æ±‚ç­‰ç­‰ã€‚
- ä¸‹é¢ä¼šè®²è§£å…¨å®¶æ¡¶çš„å®‰è£…ä¸åŸºç¡€é…ç½®ï¼Œæ¨¡å—åŒ–çš„å°è£…å°†ä¼šåœ¨ä¸‹ä¸€èŠ‚è®²è§£ã€‚

### å®‰è£…ä¾èµ–

- è¿™é‡Œæˆ‘æ¨èå¤§å®¶ä½¿ç”¨pnpmè¿›è¡Œä¾èµ–ç®¡ç†ï¼Œpnpmçš„ä¼˜ç‚¹å¤§å®¶å¯åœ¨ç½‘ä¸ŠæŸ¥é˜…ï¼Œè¿™é‡Œå°±ä¸è¿›è¡Œæ¦‚è¿°äº†ã€‚

```bash
pnpm install axios pinia pinia-plugin-persistedstate vue vue-router nprogress

# æœ¬é¡¹ç›®ä½¿ç”¨ element plus å¤§å®¶å¯ä»¥æ ¹æ®ä¸ªäººä¹ æƒ¯é€‰æ‹©è‡ªå·±å¸¸ç”¨çš„ç»„ä»¶åº“
pnpm install element-plus @element-plus/icons-vue

pnpm install -D typescript sass
```

ä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹è¿™äº›ä¾èµ–çš„ä½œç”¨ï¼Œå¤§å®¶æ ¹æ®ä¸ªäººä¹ æƒ¯é€‰æ‹©å®‰è£…å³å¯ã€‚

- vueï¼š(âŠ™ï¹âŠ™)è¿™ä¸ªåº”è¯¥ä¸ç”¨å¤šè¯´
- axiosï¼švueå®˜æ–¹æ¨èhttpè¯·æ±‚åº“
- piniaï¼švueå®˜æ–¹æ¨èçŠ¶æ€ç®¡ç†å·¥å…·
- pinia-plugin-persistedstateï¼špiniaæ•°æ®æŒä¹…åŒ–æ’ä»¶
- vue-routerï¼šè·¯ç”±ç®¡ç†å·¥å…·
- typescriptï¼šä½¿ç”¨TSè¯­è¨€
- sassï¼šcssé¢„å¤„ç†
- element-plusï¼šäº²æ°‘è€ç‰Œç»„ä»¶åº“
- nprogresï¼šç®€æ´ç¾è§‚çš„è¿›åº¦åŠ è½½æ¡ç»„ä»¶

**é¦–å…ˆåº”è¯¥æ­å»ºä¸€ä¸ªåŸºç¡€çš„Vueé¡¹ç›®ç»“æ„**

- æ–°å»ºä»¥ä¸‹ç›®å½•

```text
sv3-template/
	|- public/	# ä¸ç»è¿‡æ‰“åŒ…çš„é™æ€èµ„æº
	|- src/		# é¡¹ç›®èµ„æº
		|- assets/	# ç»è¿‡æ‰“åŒ…çš„é™æ€èµ„æº
		|- components/	# é€šç”¨ç»„ä»¶
		|- styles/	# é¡¹ç›®é€šç”¨æ ·å¼
		|- utils/	# å·¥å…·å‡½æ•°
			|- http/axios/ # axioså°è£…
		|- views/	# é¡µé¢ç»„ä»¶
		|- App.vue  # é¡¹ç›®çš„ä¸»ç»„ä»¶
		|- main.ts	# å…¥å£tsæ–‡ä»¶
	| - index.html # å…¥å£htmlæ–‡ä»¶
```

### vue

**index.html**

- å¯¹é¡µé¢è¿›è¡ŒåŸºç¡€é…ç½®

```html
<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <link rel="icon" href="/favicon.ico" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>sv3-template</title>
   </head>
   <body>
      <!-- ä»¤ id="app" ä¾¿äºvueè¿›è¡ŒæŒ‚è½½ -->
      <div id="app"></div>
      <!-- å¼•å…¥main.tsæ–‡ä»¶ -->
      <script type="module" src="/src/main.ts"></script>
   </body>
</html>
```

**/src/App.vue**

- ç¼–å†™é¡¹ç›®çš„ä¸»ç»„ä»¶

```vue
<template>
   <!-- ä¸€èˆ¬vueé¡¹ç›®éƒ½ä¼šä½¿ç”¨vue-router -->
   <!-- æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œç›´æ¥å†™ä¸€ä¸ª router-view -->
   <router-view></router-view>
</template>
<script setup></script>
```

**/src/styles/_reset.scss**

- `_reset.scss`æ˜¯è¿›è¡Œä¸€ä¸ªå¯¹åŸºç¡€HTMLé»˜è®¤æ ·å¼çš„é‡ç½®
- è¿™éƒ¨åˆ†ä¹Ÿæ˜¯æ ¹æ®ä¸ªäººä¹ æƒ¯é…ç½®å³å¯
- è¿™é‡Œå¼•ç”¨ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼š[minireset.css](https://github.com/jgthms/minireset.css/blob/master/minireset.css)

```css
html,
body,
p,
ol,
ul,
li,
dl,
dt,
dd,
blockquote,
figure,
fieldset,
legend,
textarea,
pre,
iframe,
hr,
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0;
  padding: 0;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  font-size: 100%;
  font-weight: normal;
}

ul {
  list-style: none;
}

button,
input,
select {
  margin: 0;
}

html {
  box-sizing: border-box;
}

*, *::before, *::after {
  box-sizing: inherit;
}

img,
video {
  height: auto;
  max-width: 100%;
}

iframe {
  border: 0;
}

table {
  border-collapse: collapse;
  border-spacing: 0;
}

td,
th {
  padding: 0;
}
```

**/src/main.ts**

- å¼•å…¥æ ·å¼æ–‡ä»¶ï¼ŒæŒ‚è½½Vue

```ts
import { createApp } from 'vue';
import App from './App.vue';
import './styles/_reset.scss';
const app = createApp(App);
app.mount('#app');
```

**/views/xxx.vue**

åˆ›å»ºé¡µé¢ç»“æ„

```text
views/
	|- home/	# é¡µé¢æ–‡ä»¶
		|- components/	# æ”¾ç½®é¡µé¢ä½¿ç”¨çš„ç»„ä»¶
			|- xxx.vue
		|- index.vue	# ç»è¿‡æ‰“åŒ…çš„é™æ€èµ„æº
```

æˆ‘ä»¬è¿™é‡Œå¯ä»¥éšä¾¿å†™ä¸€ä¸ªç®€å•çš„ç»„ä»¶

```vue
<template>
    <div>Hello Vue</div>
</template>
<script lang="ts" setup></script>
<style lang="scss" scoped></style>
```

### vue-router

- ç„¶åæˆ‘ä»¬éœ€è¦è¿›è¡Œå¯¹è·¯ç”±çš„é…ç½®

**/src/router/index.ts**

- è¿™é‡Œè·¯å¾„ä¸­ç”¨åˆ°äº† `@` æ˜¯æˆ‘ä»¬é…ç½®çš„åˆ«åï¼ŒæŒ‡å‘äº†srcï¼Œåœ¨åé¢ä¼šè®²è§£åˆ°å¦‚ä½•é…ç½®

```ts
import { createRouter, createWebHashHistory, RouteRecordRaw, RouteRecordRaw } from 'vue-router';
import NProgress from 'nprogress';
import 'nprogress/nprogress.css';

// é…ç½®è·¯ç”±
const routes: Array<RouteRecordRaw> = [{
   path: '/',
   name: 'Home',
   component: () => import('@/viwes/home/index.vue'),
   meta: {},
   children: [],
}];

const router = createRouter({
    history: createWebHashHistory(),
    routes,
});

router.beforeEach(async (_to, _from, next) => {
    NProgress.start();
    next()
});

router.afterEach((_to) => {
    NProgress.done();
});

export default router;
```

**/src/main.ts**

- åœ¨main.tsä¸­ï¼Œä»¤appä½¿ç”¨routeræ’ä»¶

```ts
import { createApp } from 'vue';
import App from './App.vue';
import router from '@/router'; // ++
import './styles/_reset.scss';
const app = createApp(App);
app.use(router); // ++
app.mount('#app');
```

### pinia

**/src/store/index.ts**

```ts
import { createPinia } from 'pinia';
import piniaPluginPersistedstate from 'pinia-plugin-persistedstate';
const pinia = createPinia();
// ä½¿ç”¨piniaæ•°æ®æŒä¹…åŒ–æ’ä»¶
pinia.use(piniaPluginPersistedstate);
export default pinia;
```

**/src/main.ts**

- åœ¨main.tsä¸­ï¼Œä»¤appä½¿ç”¨storeæ’ä»¶

```ts
import { createApp } from 'vue';
import App from './App.vue';
import router from '@/router';
import pinia from '@/store'; // ++
import './styles/_reset.scss';
const app = createApp(App);
app.use(router);
app.use(pinia); // ++
app.mount('#app');
```

### axios

**/src/utils/http/index.ts**

```ts
import axios from 'axios';
import type {
   AxiosInstance,
   AxiosRequestConfig,
   AxiosResponse,
   AxiosError,
   InternalAxiosRequestConfig,
} from 'axios';

const service: AxiosInstance = axios.create({
   baseURL: '/'
   timeout: 15000,
});

// axioså®ä¾‹æ‹¦æˆªè¯·æ±‚
service.interceptors.request.use(
   (config: InternalAxiosRequestConfig) => {
      return config;
   },
   (error: AxiosError) => {
      return Promise.reject(error);
   }
);

// axioså®ä¾‹æ‹¦æˆªå“åº”
service.interceptors.response.use(
   (response: AxiosResponse) => {
   },
   (error: any) => {
   }
);

export default service
```

## æ„å»ºå·¥å…·

- æˆ‘ä»¬å·²ç»å°†vue3çš„åŸºç¡€é¡¹ç›®ç»“æ„æ­å»ºå®Œæ¯•ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆæ‰èƒ½è®©è¿™ä¸ªé¡¹ç›®è·‘èµ·æ¥å‘¢ï¼Ÿ
- å› ä¸ºæµè§ˆå™¨æ˜¯ä¸èƒ½è¯†åˆ«Vueï¼ŒTSï¼ŒSassè¿™äº›è¯­è¨€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå·¥å…·å°†å®ƒä»¬è½¬å˜æˆæµè§ˆå™¨å¯ä»¥è¯†åˆ«çš„è¯­è¨€ï¼šHtmlï¼ŒCSSï¼ŒJSã€‚Viteå°±å¯ä»¥åšåˆ°è¿™äº›äº‹æƒ…ï¼Œæ¥ä¸‹æ¥æ•™å¤§å®¶é…ç½®Viteå¸®åŠ©æˆ‘ä»¬æ„å»ºé¡¹ç›®ã€‚

### å®‰è£…ä¾èµ–

```bash
pnpm install -D vite @vitejs/plugin-vue @vitejs/plugin-vue-jsx

pnpm install -D @types/node @types/nprogress vue-tsc
```

- viteï¼šé¡¹ç›®æ„å»ºå·¥å…·
- @vitejs/plugin-vueï¼šä½¿viteèƒ½å¤Ÿç¼–è¯‘vueç»„ä»¶
- @vitejs/plugin-vue-jsxï¼šä½¿viteèƒ½å¤Ÿç¼–è¯‘jsxç»„ä»¶
- @types/nodeï¼šnodeç±»å‹åŒ…ï¼Œä½¿tsæ”¯æŒnode
- @types/nprogressï¼šnprogressçš„ç±»å‹æ”¯æŒ
- vue-tscï¼švueæ–‡ä»¶çš„ç±»å‹æ£€æŸ¥å·¥å…·

### viteç¯å¢ƒå˜é‡

Viteå®˜æ–¹æ–‡æ¡£å¯¹ç¯å¢ƒå˜é‡çš„ä»‹ç»ï¼š[ç¯å¢ƒå˜é‡å’Œæ¨¡å¼ | Vite å®˜æ–¹ä¸­æ–‡æ–‡æ¡£ (vitejs.dev)](https://cn.vitejs.dev/guide/env-and-mode.html)

- Vite åœ¨ä¸€ä¸ªç‰¹æ®Šçš„ **`import.meta.env`** å¯¹è±¡ä¸Šæš´éœ²ç¯å¢ƒå˜é‡ã€‚
- æˆ‘ä»¬ä¸ºäº†é…ç½®æ–¹ä¾¿ï¼Œå¯ä»¥å°†ä¸€äº›é…ç½®é¡¹å†™åœ¨ç¯å¢ƒå˜é‡ä¸­ã€‚

**æˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºä¸‰ä¸ªæ–‡ä»¶**ï¼š`.env`ï¼Œ`.env.production`ï¼Œ`.env.development`

- .envï¼šæ‰€æœ‰æƒ…å†µä¸‹éƒ½ä¼šåŠ è½½
- .env.[mode]ï¼šåªåœ¨æŒ‡å®šæ¨¡å¼ä¸‹åŠ è½½

> npm run dev ä¼šåŠ è½½ .env å’Œ .env.development å†…çš„é…ç½®
>
> npm run build ä¼šåŠ è½½ .env å’Œ .env.production å†…çš„é…ç½®
>
> mode å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œ --mode é€‰é¡¹æ¥é‡å†™ã€‚

**.env**

- **æ³¨æ„**ï¼šç¯å¢ƒå˜é‡åç§°å¿…é¡»ä¸VITEä½œä¸ºå‰ç¼€ï¼Œå‰ç¼€å¯ä»¥åœ¨Viteé…ç½®ä¸­ä¿®æ”¹

```env
# axiosè¯·æ±‚çš„ baseURL
VITE_APP_API_BASEURL = /api
```

- å‰©ä¸‹çš„`.env.[mode]`ä¹‹åä¼šä»‹ç»åˆ°ï¼Œè¿™é‡Œæˆ‘ä»¬å°±å…ˆé…ç½®è¿™ä¸€é¡¹å³å¯

### ç¯å¢ƒå˜é‡ç±»å‹æ”¯æŒ

æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç¯å¢ƒå˜é‡å¯èƒ½ä¼šè¶Šæ¥è¶Šå¤šï¼Œæˆ‘ä»¬å¯èƒ½æƒ³è¦è·å¾—æ™ºèƒ½çš„TypeScriptè¯­æ³•æç¤ºæ¥è®©æˆ‘ä»¬çŸ¥é“æœ‰å“ªäº›ç¯å¢ƒå˜é‡ã€‚

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»º`types`æ–‡ä»¶å¤¹

**/types/env.d.ts**

```ts
/// <reference types="vite/client" />

interface ImportMetaEnv {
   // æˆ‘ä»¬æ¯æ¬¡æ·»åŠ å®Œæ–°çš„ç¯å¢ƒå˜é‡å°±åœ¨æ­¤æ·»åŠ ä¸€æ¬¡tsç±»å‹
   // è¿™æ ·æˆ‘ä»¬å°±èƒ½åœ¨ä½¿ç”¨ import.meta.env æ—¶è·å¾—tsè¯­æ³•æç¤º
   readonly VITE_APP_API_BASEURL: string;
}

interface ImportMeta {
   readonly env: ImportMetaEnv;
}

```

### viteé…ç½®æ–‡ä»¶

**vite.config.ts**

- åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º `vite.config.ts` æ–‡ä»¶
- ä¸‹é¢çš„é…ç½®é¡¹çš„è§£é‡Šå‡å·²æ³¨é‡Š
- å®˜ç½‘æœ‰æ›´åŠ è¯¦ç»†çš„é…ç½®ä»‹ç»ï¼š[é…ç½® Vite | Vite å®˜æ–¹ä¸­æ–‡æ–‡æ¡£ (vitejs.dev)](https://cn.vitejs.dev/config/)

```ts
import { defineConfig, loadEnv } from 'vite';
import type { UserConfig, ConfigEnv } from 'vite';
import { fileURLToPath } from 'url';
import vue from '@vitejs/plugin-vue';
import vueJsx from '@vitejs/plugin-vue-jsx';

export default defineConfig(({ mode }: ConfigEnv): UserConfig => {
    // è·å–å½“å‰å·¥ä½œç›®å½•
    const root = process.cwd();
    // è·å–ç¯å¢ƒå˜é‡
    const env = loadEnv(mode, root);
    return {
        // é¡¹ç›®æ ¹ç›®å½• 
      root,
        // é¡¹ç›®éƒ¨ç½²çš„åŸºç¡€è·¯å¾„
      base: '/',
      publicDir: fileURLToPath(new URL('./public', import.meta.url)), // æ— éœ€å¤„ç†çš„é™æ€èµ„æºä½ç½®
      assetsInclude: fileURLToPath(new URL('./src/assets', import.meta.url)), // éœ€è¦å¤„ç†çš„é™æ€èµ„æºä½ç½®
      plugins: [
          // Vueæ¨¡æ¿æ–‡ä»¶ç¼–è¯‘æ’ä»¶
          vue(),
          // jsxæ–‡ä»¶ç¼–è¯‘æ’ä»¶
          vueJsx(),
      ],
      // è¿è¡Œåæœ¬åœ°é¢„è§ˆçš„æœåŠ¡å™¨
      server: {
         // æ˜¯å¦å¼€å¯https
         https: false,
         // æŒ‡å®šæœåŠ¡å™¨åº”è¯¥ç›‘å¬å“ªä¸ª IP åœ°å€ã€‚ å¦‚æœå°†æ­¤è®¾ç½®ä¸º 0.0.0.0 æˆ–è€… true å°†ç›‘å¬æ‰€æœ‰åœ°å€ï¼ŒåŒ…æ‹¬å±€åŸŸç½‘å’Œå…¬ç½‘åœ°å€ã€‚
         host: true,
         // å¼€å‘ç¯å¢ƒé¢„è§ˆæœåŠ¡å™¨ç«¯å£
         port: 3000,
         // å¯åŠ¨åæ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
         open: false,
         // æ˜¯å¦å¼€å¯CORSè·¨åŸŸ
         cors: true,
         // ä»£ç†æœåŠ¡å™¨
         // å¸®åŠ©æˆ‘ä»¬å¼€å‘æ—¶è§£å†³è·¨åŸŸé—®é¢˜
         proxy: {
            // è¿™é‡Œçš„æ„æ€æ˜¯ ä»¥/apiå¼€å¤´å‘é€çš„è¯·æ±‚éƒ½ä¼šè¢«è½¬å‘åˆ° http://xxx:3000
            '/api': {
               target: 'http://xxx:3000',
               // æ”¹å˜ Host Header
               changeOrigin: true,
               // å‘èµ·è¯·æ±‚æ—¶å°† '/api' æ›¿æ¢ä¸º ''
               rewrite: (path) => path.replace(/^\/api/, ''),
            },
         },
      },
      // æ‰“åŒ…é…ç½®
      build: {
         // å…³é—­ sorcemap æŠ¥é”™ä¸ä¼šæ˜ å°„åˆ°æºç 
         sourcemap: false,
         // æ‰“åŒ…å¤§å°è¶…å‡º 4000kb æç¤ºè­¦å‘Š
         chunkSizeWarningLimit: 4000,
         rollupOptions: {
            // æ‰“åŒ…å…¥å£æ–‡ä»¶ æ ¹ç›®å½•ä¸‹çš„ index.html
            // ä¹Ÿå°±æ˜¯é¡¹ç›®ä»å“ªä¸ªæ–‡ä»¶å¼€å§‹æ‰“åŒ…
            input: {
               index: fileURLToPath(new URL('./index.html', import.meta.url)),
            },
            // é™æ€èµ„æºåˆ†ç±»æ‰“åŒ…
            output: {
               format: 'esm',
               chunkFileNames: 'static/js/[name]-[hash].js',
               entryFileNames: 'static/js/[name]-[hash].js',
               assetFileNames: 'static/[ext]/[name]-[hash].[ext]',
            },
         },
      },
      // é…ç½®åˆ«å
      resolve: {
         alias: {
            '@': fileURLToPath(new URL('./src', import.meta.url)),
            '#': fileURLToPath(new URL('./types', import.meta.url)),
         },
      },
    };
});
```

### tsé…ç½®æ–‡ä»¶

- é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»º`tsconfig.json`

**/tsconfig.json**

```ts
{
    "compilerOptions": {
        // ç¼–è¯‘å‡ºJSçš„ç›®æ ‡ESç‰ˆæœ¬
        "target": "esnext",
        // ä½¿ç”¨çš„ESç‰ˆæœ¬
        "module": "esnext",
        // ç”¨äºé€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼Œæœ‰'node'å’Œ'classic'ä¸¤ç§ç±»å‹
        "moduleResolution": "node",
        // å¼€å¯ä¸¥æ ¼æ¨¡å¼
        "strict": true,
        // å¼ºåˆ¶ä»£ç ä¸­ä½¿ç”¨çš„æ¨¡å—æ–‡ä»¶åå¿…é¡»å’Œæ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶åä¿æŒå¤§å°å†™ä¸€è‡´
        "forceConsistentCasingInFileNames": true,
        // å…è®¸ä½¿ç”¨ xxx ä»£æ›¿ * as xxx å¯¼å…¥
        "allowSyntheticDefaultImports": true,
        // æŒ‡å®š jsx ä»£ç çš„ç”Ÿæˆ: 'preserve', 'react-native', or 'react'
        "jsx": "preserve",
        // ç”¨æ¥æŒ‡å®šç¼–è¯‘æ—¶æ˜¯å¦ç”Ÿæˆ.mapæ–‡ä»¶
        "sourceMap": true,
        // é€šè¿‡ä¸ºå¯¼å…¥å†…å®¹åˆ›å»ºå‘½åç©ºé—´ï¼Œå®ç°CommonJSå’ŒESæ¨¡å—ä¹‹é—´çš„äº’æ“ä½œæ€§
        "esModuleInterop": true,
        // æ˜¯å¦å¯ä»¥å¯¼å…¥ json module
        "resolveJsonModule": true,
        // æ˜¯å¦æ£€æµ‹å®šä¹‰äº†ä½†æ˜¯æ²¡ä½¿ç”¨çš„å˜é‡
        "noUnusedLocals": true,
        // æ˜¯å¦æ£€æŸ¥æ˜¯å¦æœ‰åœ¨å‡½æ•°ä½“ä¸­æ²¡æœ‰ä½¿ç”¨çš„å‚æ•°
        "noUnusedParameters": true,
        // æ˜¯å¦å¯ç”¨å®éªŒæ€§çš„è£…é¥°å™¨ç‰¹æ€§
        "experimentalDecorators": true,
        // tsä¸­å¯ä»¥ä½¿ç”¨çš„åº“ è¿™é‡Œé…ç½®ä¸º dom ä¸ esæ¨¡å—
        "lib": ["dom", "esnext"],
        // ä¸å…è®¸å˜é‡æˆ–å‡½æ•°å‚æ•°å…·æœ‰éšå¼anyç±»å‹
        "noImplicitAny": false,
        // å¯ç”¨é˜»æ­¢å¯¹ä¸‹è½½åº“çš„ç±»å‹æ£€æŸ¥
        "skipLibCheck": true,
        // typesç”¨æ¥æŒ‡å®šéœ€è¦åŒ…å«çš„æ¨¡å—
        "types": ["vite/client", "element-plus/global"],
        // ç¼–è¯‘çš„æ—¶å€™åˆ é™¤æ³¨é‡Š
        "removeComments": true,
        // ä½¿ç”¨ç»å¯¹è·¯å¾„æ—¶ä½¿ç”¨baseUrlå»è§£æå¯¼å…¥è·¯å¾„
        "baseUrl": ".",
        // ä¸ºå¯¼å…¥è·¯å¾„é…ç½®åˆ«å
        "paths": {
            "@/*": ["src/*"],
            "#/*": ["types/*"]
        },
        // é…ç½®è™šæ‹Ÿç›®å½•
        "rootDirs": []
    },
    // æŒ‡å®šéœ€è¦ç¼–è¯‘æ–‡ä»¶
    "include": [
        "src/**/*.ts",
        "src/**/*.d.ts",
        "src/**/*.tsx",
        "src/**/*.vue",
        "types/**/*.d.ts",
        "types/**/*.ts",
        "build/**/*.ts",
        "build/**/*.d.ts",
        "mock/**/*.ts",
        "vite.config.ts"
    ],
        // æŒ‡å®šä¸éœ€è¦ç¼–è¯‘çš„æ–‡ä»¶
        "exclude": ["node_modules", "dist", "**/*.js"]
}
```

### æŒ‡ä»¤é…ç½®

- æœ€åæˆ‘ä»¬å°†æ„å»ºæŒ‡ä»¤åŠ å…¥ package.jsonä¸­

**/package.json**

```json
"scripts": {
   "dev": "vite --mode development",
   // å…ˆè¿›è¡Œè¯­æ³•æ£€æŸ¥ å†è¿›è¡Œé¡¹ç›®æ‰“åŒ…
   "build": "vue-tsc --noEmit --skipLibCheck && vite build",
},
```

## ç»“è¯­

**æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥è¿è¡Œé¡¹ç›®å§é¡¹ç›®è·‘èµ·æ¥å•¦ï¼**

```bash
pnpm run dev
```

ä¸€ä¸ªåŸºç¡€çš„ Vue3+TypeScrpit+Vite çš„é¡¹ç›®å°±æ­¤æ„é€ å®Œæ¯•ï¼

åç»­æ–‡ç« ï¼š

- **å°è£…æ¨¡å—åŒ–**ï¼šaxiosï¼Œstoreï¼Œrouteræ¨¡å—åŒ–ä½¿ç”¨ï¼ˆå¾…æ›´æ–°ï¼‰
- **è§„èŒƒå›¢é˜Ÿå¼€å‘**ï¼šå‘é¡¹ç›®ä¸­é›†æˆCommitLIntï¼ŒESLintï¼ŒPrettierï¼ŒStyleLintï¼ˆå¾…æ›´æ–°ï¼‰
- **æé«˜å¼€å‘æ•ˆç‡**ï¼šMock.jsè¿›è¡Œæ•°æ®æ¨¡æ‹Ÿï¼Œå‘Šåˆ«åç«¯æ‘†çƒ‚ã€‚Plopå¿«é€Ÿç”Ÿæˆæ¨¡æ¿æ–‡ä»¶ï¼ï¼ˆå¾…æ›´æ–°ï¼‰

> å¦‚æœå¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œè¯·ç»™æˆ‘ç‚¹ä¸ªèµå§ğŸ‘
>
> å…³æ³¨æˆ‘ï¼Œåç»­æ–‡ç« ä¸è¿·è·¯â›„